---
title: Instance
description: Reference on the MW object or getMW function
---

import { LinkCard } from "@astrojs/starlight/components";

There are two ways you receive a MANAWAVE instance to work with. A MANAWAVE instance is an
object that lets you [configure](/docs/reference/attributes), [override](/docs/guides/overrides), or control the marquee.

## MW

MW constructs and [initializes](/docs/guides/initialization) a marquee given a DOM element.

```javascript
// queried from the page
const element = document.querySelector("#element");
const mw = new MW(element);
```

## <a id="options"></a> MW Options

```javascript
// selector with options
const MWOptions = {
  direction: "up",
  speed: 2.1,
  autoplay: true,
};

const mw = new MW("#element", MWOptions);
```

Here are all the options you can use:

### Attributes

Attributes have [specific values and formats](/docs/reference/attributes) to be followed.

```json
{
  "speed": 2.1,
  "direction": 190.5,
  "autoplay": true
}
```

#### `speed`

**type**: `number`

```json
{
  "speed": 2.1
}
```

#### `direction`

**type**: `number`

```json
{
  "direction": 195.5
}
```

#### `autoplay`

**type**: `boolean`

```json
{
  "autoplay": true
}
```

### Marquee Pipeline

These are the properties:

- `onLayout`
- `onMove`
- `onLoop`

You should refer to the [methods](#methods) section below for details. Instead of being assigned to a constant,
you would use the callback in the options object.

<details>
  <summary>Example</summary>

```javascript
const mw = new MW("...", {
  onLayout: ({ initialSize, position, limits}) => { ... }
})
```

</details>

<LinkCard title="Marquee Pipeline Methods" href="#methods-marquee" />

### DOM Pipeline

These are the properties:

- `onElementCreated`
- `onElementDrawn`
- `onElementDestroyed`

You should refer to the [methods](#methods) section below for details. Instead of being assigned to a constant,
you would use the callback in the options object.

<details>
  <summary>Example</summary>

```javascript
const mw = new MW("...", {
  onElementCreated: ({ element, id }) => { ... }
})
```

</details>

<LinkCard title="DOM Pipeline Methods" href="#methods-dom" />

## MW Methods

These may look similar to the options because they are.
These methods are intended to dynamically update the marquee during runtime.

:::caution[Don't initialize the marquee with these methods]
While it may be tempting to [initialize](/docs/guides/initialization) by only using
these methods, it could cause [FOUC]() because of [relayout](/docs/reference/behavior).
If you're planning to initialize the state of a marquee, you should use the [options object](#options).

<details>
<summary>Example</summary>

```html
<div id="manawave-marquee">Content</div>
```

**DON'T**

```js
const mw = new MW("#manawave-marquee");
mw.autoplay = true;
mw.speed = 2;
mw.direction = 12;
mw.onLayout = ({ position, limits }) => { ... };
```

**DO**

```js
const mw = new MW("#manawave-marquee", {
  autoplay: true,
  speed: 2,
  direction: 12,
  onLayout: ({ position, limits}) => { ... }
});
```

</details>

:::

### <a id="methods"></a> General Methods

#### `eachElement`

View or operate on each element in the marquee.

```javascript
mw.eachElement(({ element, id }) => {
  element.style.background = "red";
});
```

Takes a callback with two parameters:

##### `element`

**type**: `HTMLElement`

The current [item](/docs/behavior/item) represented as an element on the marquee grid.

##### `id`

**type**: `string`

An ID that uniquely identifies the current [item](/docs/behavior/item).

### Attributes

These are designated differently from the attributes found in the options. You use these methods
to read and write changes to the attribute (except autoplay) over time (during runtime).

#### `speed`

You can use this to read and write the value.

```javascript
mw.speed = 1.5;
console.log(mw.speed); // 1.5
```

#### `direction`

You can use this to read and write the value.

```javascript
mw.direction = 20;
console.log(mw.direction); // 20
```

#### `autoplay`

You can use this to write the value.

```javascript
mw.autoplay = true;
```

### <a id="methods-marquee"></a> Marquee Pipeline

These are just like the [MW Options](#options) except they are invoked during runtime.

#### `onLayout`

```javascript
mw.onLayout = ({ position, limits, initialSize }) => {
  return {
    size: { width: initialSize.width + 10, height: initialSize.height + 10 },
    position,
  };
};
```

Triggers [relayout](/docs/reference/behavior).

#### `onMove`

```javascript
mw.onMove = ({ direction, speed, dt, t }) => {
  return { direction: 999 };
};
```

#### `onLoop`

```javascript
mw.onLoop = ({ limits, itemSize, marqueeSize, direction }) => {
  return {
    limits: {
      up: limits.up + 1,
      right: limits.right + 1,
      left: limits.left - 1,
      down: limits.down - 1,
    },
  };
};
```

### <a id="methods-dom"></a> DOM Pipeline

#### `onElementCreated`

```javascript
mw.onElementCreated = ({ element, id }) => {
  element.style.background = "red";
};
```

Triggers [relayout](/docs/reference/behavior).

#### `onElementDrawn`

```javascript
mw.onElementCreated = ({ element, id, dt, t }) => {
  element.textContent = t;
};
```

Triggers [relayout](/docs/reference/behavior).

#### `onElementDestroyed`

```javascript
mw.onElementCreated = ({ element, id }) => {
  element.style.background = "initial";
};
```

## getMW

Given an `Element`, get an `MW` instance. You can use all the `MW` methods described above.

```javascript
const element = document.querySelector("#element");

const mw = getMW(element);
mw.play();
mw.direction = 30;
```
